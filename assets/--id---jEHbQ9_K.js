import{c as y,u as V}from"./constants-CTPUJLWd.js";import{J as T,al as A,_ as E,G as $,a1 as P,am as D,$ as F,a3 as J,j as N,ad as R,X as U,a as p,d as j,w as L,r as m,k as v,g as c,B as f,F as k,A as z,l as w,u,p as G,f as g,b as W,e as I,o as M,s as X}from"./index-CA7ocr_F.js";import{d as q,o as H,h as K,V as O,a as Q}from"./VAvatar-CUUNBoen.js";import{e as S}from"./api-9tPuCsq3.js";import{u as Y,b as x}from"./route-block-ChJ--dWl.js";const Z={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ee(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return p("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function B(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>_(a))}function _(e){let a=[];if(!e)return a;const t=Z[e];if(e!==t){if(e.includes(","))return C(e);if(e.includes("@"))return B(e);t.includes(",")?a=C(t):t.includes("@")?a=B(t):t&&a.push(_(t))}return[ee(e,a)]}function C(e){return e.replace(/\s/g,"").split(",").map(_)}const te=T({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...A(),...q(),...E()},"VSkeletonLoader"),ae=$()({name:"VSkeletonLoader",props:te(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:n,backgroundColorStyles:o}=H(P(e,"color")),{dimensionStyles:i}=D(e),{elevationClasses:l}=K(e),{themeClasses:s}=F(e),{t:r}=J(),d=N(()=>_(R(e.type).join(",")));return U(()=>{var b;const h=!t.default||e.loading;return p("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},s.value,n.value,l.value],style:[o.value,h?i.value:{}],"aria-busy":e.boilerplate?void 0:h,"aria-live":e.boilerplate?void 0:"polite","aria-label":e.boilerplate?void 0:r(e.loadingText),role:e.boilerplate?void 0:"alert"},[h?d.value:(b=t.default)==null?void 0:b.call(t)])}),{}}}),ie={key:0,class:"join-widget d-flex flex-column"},se={class:"d-flex justify-space-between align-center"},ne={class:"join-widget__title font-weight-medium"},oe={class:"join-widget__duration font-weight-regular"},le={class:"join-widget__description font-weight-regular"},re={class:"d-flex ga-1 mt-4 font-weight-regular"},de={key:1,class:"join-widget d-flex flex-column"},ce=j({__name:"JoinWidget",props:{data:{},isLoading:{type:Boolean},isSyncing:{type:Boolean}},setup(e){const a=e;L(()=>a.isSyncing,i=>{i?(n.value=!1,t.value=!0,o.value="Syncing..."):(o.value="Everything is up-to-date",n.value=!0,setTimeout(()=>{t.value=!1},3e3))});const t=m(!1),n=m(!1),o=m("Everything is up-to-date");return(i,l)=>(g(),v(k,null,[i.isLoading?w("",!0):(g(),v("div",ie,[c("div",se,[c("span",ne,f(i.data.title),1),c("span",oe,f(i.data.duration),1)]),c("span",le,f(i.data.description),1),c("span",re,[(g(!0),v(k,null,z(i.data.participants,(s,r)=>(g(),W(Q,{key:r,size:"small"},{default:I(()=>[p(O,{alt:u(y)[s].label,src:u(y)[s].imageUrl},null,8,["alt","src"])]),_:2},1024))),128))])])),c("div",{class:G(["join-widget__current-state",{"join-widget__current-state--visible":u(t),"join-widget__current-state--green":u(t)&&u(n)}])},f(u(o)),3),i.isLoading?(g(),v("div",de,[p(ae,{theme:"light",type:"article"})])):w("",!0)],64))}}),ue={class:"join-meeting-info"},ge=j({__name:"[id]",setup(e){const a=X(),t=Y(),n=V(),o=m({title:"",description:"",participants:[0,1,2,3],duration:""}),i=m(!1),l=m(!1);return M(async()=>{i.value=!0;const s=(await S.get(a.params.id)).data;o.value={title:s.title,description:s.description,duration:s.duration_of_event,participants:[]},i.value=!1}),L(()=>n.timeslots,async s=>{const r=(n.timeslots??[]).map(d=>({start_time:d.start,end_time:d.end}));l.value=!0,await S.submitAvailability(a.params.id,{uid:t.getUid(),is_creator:!1,available_slots:r}),l.value=!1}),(s,r)=>{const d=ce;return g(),v("div",ue,[p(d,{data:o.value,"is-loading":i.value,"is-syncing":l.value},null,8,["data","is-loading","is-syncing"])])}}});typeof x=="function"&&x(ge);export{ge as default};
