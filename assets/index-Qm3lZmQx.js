import{u as L,c as E}from"./constants-CTPUJLWd.js";import{g as U}from"./utills-D1nRPdAS.js";import{e as q,d as X}from"./api-9tPuCsq3.js";import{u as Y,b as S}from"./route-block-ChJ--dWl.js";import{d as V,y as F,r as m,z as H,w as k,k as p,F as y,A,f as c,b as I,m as O,u as f,q as R,g as a,a as v,e as x,B as D,C as B}from"./index-CA7ocr_F.js";import{V as T}from"./forwardRefs-eTT4msJW.js";import{V as Z,a as j}from"./VAvatar-CUUNBoen.js";const G=V({__name:"Widgets",props:{modelValue:{required:!0},modelModifiers:{}},emits:F(["openWidget"],["update:modelValue"]),setup(h,{emit:_}){const g=m({}),n=m(),u=m([]),l=_,t=H(h,"modelValue"),s=Y(),w=L();function P(e,d){[document.querySelector(".widget__title__label"),document.querySelector(".widget--action-button")].some(o=>(o==null?void 0:o.contains(e.target))||!!e.target.closest(".action-button--no-fs"))||l("openWidget",{widget:u.value[d].widget,widgetParams:t.value[d]})}k(()=>t.value,e=>{var i;const d=o=>o?"Meeting with "+o.map(r=>E[r].label).join(", "):"Add title";t.value.length<2||t.value[2].kind!="title"||(i=t.value[2])!=null&&i.wasEdited||e[0].value.length&&(t.value[2].value=d(e[0].value))},{deep:!0});const M=e=>({gridColumnStart:e.gridPosX,gridColumnEnd:`span ${e.gridWidth}`,gridRowStart:e.gridPosY,gridRowEnd:`span ${e.gridHeight}`}),b=e=>t.value.find(d=>d.kind==e),C=m(!1);k(()=>C.value,()=>{t.value.forEach(e=>e.disabled=C.value)});const $=async()=>{var r;const e=b("title"),d=b("duration"),i=(w.timeslots??[]).map(W=>({start_time:W.start,end_time:W.end}));C.value=!0;const o=await q.create({title:e.value,description:e.description,duration_of_event:((r=d.value)==null?void 0:r.text)??d.duration,attendees:[{uid:s.getUid(),available_slots:i,is_creator:!0}],event_window:{deadline:new Date().toISOString(),selected_dates:[new Date().toISOString()]},invited:[]});C.value=!1,t.value=[],t.value=[{value:`https://meet-proto.github.io/#/join/${o.data.event_id}`,kind:"shareEvent",gridWidth:4,gridHeight:1,gridPosX:1,gridPosY:1}]};return(e,d)=>(c(),p("div",{ref_key:"widgetContainer",ref:n,class:"widget__container"},[(c(!0),p(y,null,A(t.value,(i,o)=>(c(),I(R(f(U)(i)),O({key:o,ref_for:!0,ref_key:"widgetRefs",ref:u},i,{class:["widget",{"widget--fullscreen":f(g)["widget-"+o],"widget--disabled":i==null?void 0:i.disabled}],modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,style:M(i),onClick:r=>P(r,o),onCreateEvent:$,onTitleEdit:r=>i.wasEdited=!0}),null,16,["modelValue","onUpdate:modelValue","class","style","onClick","onTitleEdit"]))),128))],512))}}),N={class:"welcome-widgets d-flex flex-column ga-3"},z=a("span",{class:"welcome-widgets__title font-weight-bold"},"Schedule a meeting with...",-1),K={class:"welcome-widgets__variants d-flex ga-3"},J=["onClick"],Q={class:"welcome-widgets__variant__label"},ee=a("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("g",{"clip-path":"url(#clip0_1027_1528)"},[a("path",{d:"M23.7663 12.2764C23.7663 11.4607 23.7001 10.6406 23.559 9.83807H12.2402V14.4591H18.722C18.453 15.9494 17.5888 17.2678 16.3233 18.1056V21.1039H20.1903C22.4611 19.0139 23.7663 15.9274 23.7663 12.2764Z",fill:"#4285F4"}),a("path",{d:"M12.2401 24.0008C15.4766 24.0008 18.2059 22.9382 20.1945 21.1039L16.3276 18.1055C15.2517 18.8375 13.8627 19.252 12.2445 19.252C9.11388 19.252 6.45946 17.1399 5.50705 14.3003H1.5166V17.3912C3.55371 21.4434 7.7029 24.0008 12.2401 24.0008Z",fill:"#34A853"}),a("path",{d:"M5.50277 14.3003C5.00011 12.8099 5.00011 11.1961 5.50277 9.70575V6.61481H1.51674C-0.185266 10.0056 -0.185266 14.0004 1.51674 17.3912L5.50277 14.3003Z",fill:"#FBBC04"}),a("path",{d:"M12.2401 4.74966C13.9509 4.7232 15.6044 5.36697 16.8434 6.54867L20.2695 3.12262C18.1001 1.0855 15.2208 -0.034466 12.2401 0.000808666C7.7029 0.000808666 3.55371 2.55822 1.5166 6.61481L5.50264 9.70575C6.45064 6.86173 9.10947 4.74966 12.2401 4.74966Z",fill:"#EA4335"})]),a("defs",null,[a("clipPath",{id:"clip0_1027_1528"},[a("rect",{width:"24",height:"24",fill:"white"})])])],-1),te=a("span",{class:"ml-3 font-weight-600 text-gray-700"},"Connect your calendar",-1),ie=V({__name:"WelcomeWidgets",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(h){const _=H(h,"modelValue");function g(l){var t;_.value[0].value={0:[0],1:[1],2:[2],3:[3],4:[0,1,2,3]}[l],(t=document.querySelector(".widget__container > .widget"))==null||t.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}const n=m(!1);async function u(){n.value=!0;try{await X.ping()}catch{n.value=!1}window.location.href="https://meet-be-x2yf.onrender.com/sync/google-calendar"}return(l,t)=>(c(),p("div",N,[z,a("div",K,[(c(!0),p(y,null,A(f(E),(s,w)=>(c(),p("div",{key:w,class:"welcome-widgets__variant d-flex flex-column align-center",onClick:P=>g(w)},[v(j,null,{default:x(()=>[v(Z,{alt:s.label,src:s.imageUrl},null,8,["alt","src"])]),_:2},1024),a("span",Q,D(s.label),1)],8,J))),128))]),v(T,{class:"mt-3",variant:"flat",theme:"dark",block:"",loading:f(n),onClick:u},{default:x(()=>[ee,te]),_:1},8,["loading"])]))}}),ae={class:"meeting-info"},ne={class:"meeting-info"},le=V({__name:"index",emits:["handleOpenWidget","handleParticipantsChange"],setup(h,{emit:_}){const g=_,n=m([{value:[],kind:"participants",participants:[],link:"link copied",gridWidth:3,gridHeight:1,gridPosX:1,gridPosY:1},{value:void 0,kind:"duration",duration:"1 hour",gridWidth:1,gridHeight:1,gridPosX:4,gridPosY:1},{value:void 0,kind:"title",title:"Add title",description:"Add description",gridWidth:4,gridHeight:1,gridPosX:1,gridPosY:2},{value:void 0,kind:"createButton",gridWidth:2,gridHeight:1,gridPosX:2,gridPosY:3}]);return k(()=>n.value[0].value,u=>{g("handleParticipantsChange",u)},{deep:!0}),(u,l)=>{const t=G;return c(),p(y,null,[a("div",ae,[v(ie,{modelValue:f(n),"onUpdate:modelValue":l[0]||(l[0]=s=>B(n)?n.value=s:null)},null,8,["modelValue"])]),a("div",ne,[v(t,{modelValue:f(n),"onUpdate:modelValue":l[1]||(l[1]=s=>B(n)?n.value=s:null),onOpenWidget:l[2]||(l[2]=s=>g("handleOpenWidget",s))},null,8,["modelValue"])])],64)}}});typeof S=="function"&&S(le);export{le as default};
